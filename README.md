# DishPowerContextMenu

åŒå€¦äº†åœ¨ Finder ä¸­ç¹ççš„æ–‡ä»¶æ“ä½œï¼Ÿã€ŒDishPowerContextMenuã€ä¸ºæ‚¨å¸¦æ¥æè‡´ä¾¿æ·çš„å³é”®èœå•ä½“éªŒï¼ä¸€é”®åœ¨ç»ˆç«¯æˆ– VSCode ä¸­æ‰“å¼€æ–‡ä»¶/æ–‡ä»¶å¤¹ï¼Œå¿«é€Ÿå¤åˆ¶è·¯å¾„ï¼Œè½»æ¾åˆ›å»ºå¸¸ç”¨æ–‡æ¡£ã€‚åŸºäº macOS Security-Scoped Bookmarks çš„å®‰å…¨æƒé™ç®¡ç†ç³»ç»Ÿï¼Œç¡®ä¿æ‚¨çš„æ–‡ä»¶è®¿é—®æ—¢ä¾¿æ·åˆå®‰å…¨ã€‚å‘Šåˆ«é‡å¤ç‚¹å‡»ï¼Œå¤§å¹…æå‡æ‚¨çš„å·¥ä½œæ•ˆç‡ã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸš€ æ ¸å¿ƒåŠŸèƒ½
*   **æ™ºèƒ½åº”ç”¨å¯åŠ¨ï¼š** æ”¯æŒåœ¨ Terminalã€iTerm2ã€Warpã€VSCode ç­‰å¤šç§åº”ç”¨ä¸­æ‰“å¼€æ–‡ä»¶/æ–‡ä»¶å¤¹
*   **æ–‡ä»¶å¤¹æƒé™ç®¡ç†ï¼š** åŸºäº Security-Scoped Bookmarks çš„æ™ºèƒ½æƒé™ç³»ç»Ÿï¼Œå®‰å…¨ç®¡ç†æ–‡ä»¶å¤¹è®¿é—®æƒé™
*   **å¿«æ·æ“ä½œï¼š** ä¸€é”®å¤åˆ¶è·¯å¾„ã€åˆ›å»ºæ–°æ–‡ä»¶å¤¹ç­‰å¸¸ç”¨æ“ä½œ
*   **æ–‡æ¡£å¿«é€Ÿåˆ›å»ºï¼š** æ”¯æŒåˆ›å»ºå¤šç§æ–‡ä»¶ç±»å‹ï¼ˆæ–‡æœ¬ã€Markdownã€ä»£ç æ–‡ä»¶ç­‰ï¼‰
*   **è‡ªå®šä¹‰ç»ˆç«¯é…ç½®ï¼š** æ”¯æŒæ·»åŠ å’Œç®¡ç†å¤šç§ç»ˆç«¯åº”ç”¨ï¼ŒåŒ…æ‹¬è‡ªå®šä¹‰ Bundle ID
*   **åŠ¨æ€èœå•é…ç½®ï¼š** æ”¯æŒåˆ†ç»„ç®¡ç†èœå•é¡¹ï¼Œå¯è‡ªå®šä¹‰å¯ç”¨/ç¦ç”¨çŠ¶æ€

### ğŸ¨ ç”¨æˆ·ç•Œé¢
*   **ç°ä»£åŒ–ç»ç’ƒæ€è®¾è®¡ï¼š** é‡‡ç”¨ Glassmorphism è®¾è®¡é£æ ¼ï¼Œç•Œé¢ç¾è§‚ç°ä»£
*   **å“åº”å¼å¸ƒå±€ï¼š** è‡ªé€‚åº”ä¸åŒå±å¹•å°ºå¯¸ï¼Œæä¾›æœ€ä½³ç”¨æˆ·ä½“éªŒ
*   **åŠ¨ç”»æ•ˆæœï¼š** æµç•…çš„è¿‡æ¸¡åŠ¨ç”»å’Œäº¤äº’åé¦ˆ
*   **ç›´è§‚çš„é…ç½®ç•Œé¢ï¼š** å¯è§†åŒ–çš„èœå•é¡¹ç®¡ç†å’Œé…ç½®

### ğŸ”§ é«˜çº§ç‰¹æ€§
*   **Security-Scoped Bookmarks ç³»ç»Ÿï¼š** é‡‡ç”¨ macOS åŸç”Ÿå®‰å…¨æœºåˆ¶ï¼Œç¡®ä¿æ²™ç›’ç¯å¢ƒä¸‹çš„å®‰å…¨æ–‡ä»¶è®¿é—®
*   **æ™ºèƒ½æƒé™æ¢å¤ï¼š** è‡ªåŠ¨æ£€æµ‹å’Œæ¢å¤å¤±æ•ˆçš„æ–‡ä»¶å¤¹è®¿é—®æƒé™ï¼Œæ— éœ€é‡å¤æˆæƒ
*   **è·¨è¿›ç¨‹é€šä¿¡ï¼š** Flutter ä¸»åº”ç”¨ä¸ Finder æ‰©å±•é—´çš„é«˜æ•ˆæ¶ˆæ¯ä¼ é€’æœºåˆ¶
*   **é…ç½®æŒä¹…åŒ–ï¼š** ä½¿ç”¨ SharedPreferences å’Œ UserDefaults åŒé‡ä¿å­˜ç”¨æˆ·é…ç½®
*   **èœå•é¡¹åˆ†ç»„ç®¡ç†ï¼š** æ”¯æŒ appã€actionã€newFileã€terminal å››ç§ç±»å‹çš„èœå•é¡¹åˆ†ç»„
*   **æ¨¡å—åŒ–æ¶æ„ï¼š** æ¸…æ™°çš„ä»£ç ç»“æ„ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•

## ä½¿ç”¨æ–¹æ³•

### ğŸ“± åº”ç”¨ä½¿ç”¨
1. **æ–‡ä»¶å¤¹æˆæƒï¼š** é¦–æ¬¡ä½¿ç”¨æ—¶ï¼Œç‚¹å‡»ã€Œé€‰æ‹©æ–‡ä»¶å¤¹ã€æŒ‰é’®æˆæƒéœ€è¦ç®¡ç†çš„æ–‡ä»¶å¤¹
   - ç³»ç»Ÿä¼šå¼¹å‡ºæ–‡ä»¶å¤¹é€‰æ‹©å¯¹è¯æ¡†
   - é€‰æ‹©éœ€è¦ç®¡ç†çš„æ–‡ä»¶å¤¹åï¼Œåº”ç”¨ä¼šè‡ªåŠ¨åˆ›å»º Security-Scoped Bookmark
   - æˆæƒä¿¡æ¯ä¼šå®‰å…¨ä¿å­˜ï¼Œé‡å¯åº”ç”¨åè‡ªåŠ¨æ¢å¤
2. **é…ç½®èœå•ï¼š** ç‚¹å‡»ã€Œé…ç½® Finder èœå•ã€è‡ªå®šä¹‰å³é”®èœå•é¡¹
   - æ”¯æŒå¯ç”¨/ç¦ç”¨ç‰¹å®šèœå•é¡¹
   - å¯æŒ‰ç±»å‹åˆ†ç»„ç®¡ç†ï¼ˆåº”ç”¨ã€æ“ä½œã€æ–°å»ºæ–‡ä»¶ã€ç»ˆç«¯ï¼‰
3. **æ·»åŠ åº”ç”¨ï¼š** åœ¨é…ç½®ç•Œé¢ä¸­å¯ä»¥æ·»åŠ è‡ªå®šä¹‰çš„åº”ç”¨ç¨‹åºåˆ°èœå•
   - æ”¯æŒè‡ªå®šä¹‰åº”ç”¨åç§°å’Œ Bundle ID
   - ç‰¹åˆ«æ”¯æŒå„ç§ç»ˆç«¯åº”ç”¨çš„é…ç½®
4. **ç®¡ç†æƒé™ï¼š** åœ¨ä¸»ç•Œé¢æŸ¥çœ‹å’Œç®¡ç†å·²æˆæƒçš„æ–‡ä»¶å¤¹
   - å¯ä»¥ç§»é™¤ä¸å†éœ€è¦çš„æ–‡ä»¶å¤¹æƒé™
   - è‡ªåŠ¨æ£€æµ‹æƒé™çŠ¶æ€ï¼Œå¤±æ•ˆæ—¶æç¤ºé‡æ–°æˆæƒ

### ğŸ¯ Finder é›†æˆ
- åœ¨ Finder ä¸­å³é”®ç‚¹å‡»æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹
- å¯¹äºæœªæˆæƒçš„æ–‡ä»¶å¤¹ï¼Œä¼šæ˜¾ç¤ºã€Œæ·»åŠ åˆ°æˆæƒåˆ—è¡¨ã€é€‰é¡¹
- å¯¹äºå·²æˆæƒçš„æ–‡ä»¶å¤¹ï¼Œæ˜¾ç¤ºå®Œæ•´çš„è‡ªå®šä¹‰èœå•
- é€‰æ‹©ç›¸åº”çš„èœå•é¡¹å¿«é€Ÿæ‰§è¡Œæ“ä½œ
- æ”¯æŒæ‰¹é‡é€‰æ‹©å’Œæ“ä½œ

### ğŸ”§ æ•…éšœæ’é™¤
- **æƒé™å¤±æ•ˆï¼š** å¦‚æœèœå•ä¸æ˜¾ç¤ºï¼Œè¯·æ£€æŸ¥æ–‡ä»¶å¤¹æ˜¯å¦å·²æˆæƒ
- **æ‰©å±•æœªå¯ç”¨ï¼š** åœ¨ç³»ç»Ÿåå¥½è®¾ç½® > æ‰©å±• > Finder ä¸­å¯ç”¨æ‰©å±•
- **æƒé™æ¢å¤ï¼š** åº”ç”¨ä¼šè‡ªåŠ¨å°è¯•æ¢å¤å¤±æ•ˆçš„æƒé™ï¼Œå¦‚å¤±è´¥è¯·é‡æ–°æˆæƒ

## å®‰è£…æ­¥éª¤

1.  **å®‰è£… Flutter:**

    *   è®¿é—® [Flutter å®˜ç½‘](https://flutter.dev/docs/get-started/install) ä¸‹è½½å¹¶å®‰è£… Flutter SDKã€‚
    *   é…ç½® Flutter ç¯å¢ƒå˜é‡ã€‚
2.  **å…‹éš†é¡¹ç›®:**

    ```bash
    git clone https://github.com/your-username/dish-power-context-menu.git
    cd dish-power-context-menu
    ```
3.  **æ„å»º macOS åº”ç”¨ç¨‹åº:**

    ```bash
    flutter build macos
    ```

    æ„å»ºå®Œæˆåï¼Œåº”ç”¨ç¨‹åºä½äº `macos/build/macos/Build/Products/Release/` ç›®å½•ä¸‹ã€‚
4.  **æ·»åŠ åˆ° Finder æ‰©å±•:**

    *   æ‰“å¼€ "ç³»ç»Ÿåå¥½è®¾ç½®" -> "æ‰©å±•" -> "Finder"ã€‚
    *   å‹¾é€‰ "DishPowerContextMenu" æ‰©å±•ã€‚

## é¡¹ç›®æ¶æ„

### ğŸ“ ç›®å½•ç»“æ„

```
flutter_application_1/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ core/                    # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ bookmark_manager.dart # Security-Scoped Bookmarks ç®¡ç†
â”‚   â”‚   â””â”€â”€ terminal_config_manager.dart # ç»ˆç«¯é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ models/                  # æ•°æ®æ¨¡å‹
â”‚   â”‚   â””â”€â”€ finder_menu_item.dart # Finderèœå•é¡¹æ¨¡å‹ï¼ˆæ”¯æŒåˆ†ç»„ï¼‰
â”‚   â”œâ”€â”€ native/                  # åŸç”Ÿå¹³å°äº¤äº’
â”‚   â”‚   â””â”€â”€ folder_picker.dart   # æ–‡ä»¶å¤¹é€‰æ‹©å™¨ï¼ˆMethodChannelï¼‰
â”‚   â”œâ”€â”€ ui/                      # ç”¨æˆ·ç•Œé¢
â”‚   â”‚   â””â”€â”€ home_page.dart       # ä¸»é¡µé¢ï¼ˆæƒé™ç®¡ç†+èœå•é…ç½®ï¼‰
â”‚   â”œâ”€â”€ widgets/                 # è‡ªå®šä¹‰ç»„ä»¶
â”‚   â”‚   â””â”€â”€ glass/               # ç»ç’ƒæ€UIç»„ä»¶
â”‚   â”‚       â”œâ”€â”€ components/      # åŸºç¡€ç»„ä»¶
â”‚   â”‚       â”œâ”€â”€ core/           # æ ¸å¿ƒæ ·å¼
â”‚   â”‚       â””â”€â”€ panels/         # é¢æ¿ç»„ä»¶
â”‚   â””â”€â”€ main.dart               # åº”ç”¨å…¥å£
â”œâ”€â”€ macos/                      # macOS åŸç”Ÿä»£ç 
â”‚   â”œâ”€â”€ FinderSyncExt/          # Finder æ‰©å±•
â”‚   â”‚   â”œâ”€â”€ FinderSync.swift    # æ‰©å±•ä¸»æ–‡ä»¶ï¼ˆæƒé™æ£€æŸ¥+èœå•æ„å»ºï¼‰
â”‚   â”‚   â”œâ”€â”€ MenuItemProvider.swift # èœå•é¡¹æä¾›å™¨
â”‚   â”‚   â”œâ”€â”€ MenuBuilder.swift   # èœå•æ„å»ºå™¨
â”‚   â”‚   â””â”€â”€ ActionDispatcher.swift # åŠ¨ä½œåˆ†å‘å™¨
â”‚   â”œâ”€â”€ Runner/                 # Flutter ä¸»åº”ç”¨
â”‚   â”‚   â”œâ”€â”€ FinderActionHandler.swift # Finderæ“ä½œå¤„ç†
â”‚   â”‚   â”œâ”€â”€ BookmarkHandler.swift # ä¹¦ç­¾å¤„ç†
â”‚   â”‚   â””â”€â”€ Messager.swift      # è·¨è¿›ç¨‹æ¶ˆæ¯ä¼ é€’
â”‚   â””â”€â”€ Shared/                 # å…±äº«ç»„ä»¶
â””â”€â”€ pubspec.yaml               # é¡¹ç›®é…ç½®
```

### ğŸ—ï¸ æŠ€æœ¯æ¶æ„

- **Flutter å‰ç«¯ï¼š** ä½¿ç”¨ Flutter æ„å»ºç°ä»£åŒ–çš„ç»ç’ƒæ€ç”¨æˆ·ç•Œé¢
- **Finder æ‰©å±•ï¼š** Swift å®ç°çš„ macOS FinderSync æ‰©å±•ï¼Œæä¾›å³é”®èœå•é›†æˆ
- **è·¨è¿›ç¨‹é€šä¿¡ï¼š** åŸºäº MethodChannel å’Œ Messager çš„ Flutter â†” Swift åŒå‘é€šä¿¡
- **æƒé™ç®¡ç†ï¼š** Security-Scoped Bookmarks + BookmarkHandler çš„å®‰å…¨è®¿é—®æœºåˆ¶
- **èœå•ç³»ç»Ÿï¼š** MenuBuilder + MenuItemProvider çš„åŠ¨æ€èœå•æ„å»º
- **åŠ¨ä½œåˆ†å‘ï¼š** ActionDispatcher + FinderActionHandler çš„ç»Ÿä¸€æ“ä½œå¤„ç†
- **æ•°æ®æŒä¹…åŒ–ï¼š** SharedPreferences (Flutter) + UserDefaults (macOS) åŒé‡å­˜å‚¨
- **æ¨¡å—åŒ–è®¾è®¡ï¼š** æ¸…æ™°çš„åˆ†å±‚æ¶æ„ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•

## æŠ€æœ¯ç‰¹æ€§

### ğŸ”’ å®‰å…¨æ€§
- **Security-Scoped Bookmarksï¼š** åŸºäº macOS åŸç”Ÿå®‰å…¨æœºåˆ¶çš„æ–‡ä»¶è®¿é—®æ§åˆ¶
- **æ²™ç›’å…¼å®¹ï¼š** å®Œå…¨å…¼å®¹ macOS åº”ç”¨æ²™ç›’ç¯å¢ƒçš„å®‰å…¨é™åˆ¶
- **æƒé™éªŒè¯ï¼š** å®æ—¶æ£€æµ‹å’ŒéªŒè¯æ–‡ä»¶å¤¹è®¿é—®æƒé™çŠ¶æ€
- **æœ¬åœ°å­˜å‚¨ï¼š** ç”¨æˆ·æ•°æ®å®Œå…¨æœ¬åœ°å­˜å‚¨ï¼Œä¿æŠ¤éšç§å®‰å…¨

### âš¡ æ€§èƒ½ä¼˜åŒ–
- **å¼‚æ­¥æ“ä½œï¼š** æ‰€æœ‰æ–‡ä»¶æ“ä½œå‡é‡‡ç”¨å¼‚æ­¥å¤„ç†ï¼Œé¿å…ç•Œé¢å¡é¡¿
- **æ™ºèƒ½ç¼“å­˜ï¼š** æƒé™çŠ¶æ€ç¼“å­˜å’Œè‡ªåŠ¨æ¢å¤æœºåˆ¶
- **é«˜æ•ˆé€šä¿¡ï¼š** ä¼˜åŒ–çš„è·¨è¿›ç¨‹æ¶ˆæ¯ä¼ é€’ï¼Œå‡å°‘é€šä¿¡å¼€é”€
- **UI ä¼˜åŒ–ï¼š** ç»ç’ƒæ€æ•ˆæœå’ŒåŠ¨ç”»çš„æ€§èƒ½ä¼˜åŒ–

### ğŸ”§ å¼€å‘ç‰¹æ€§
- **è·¨è¿›ç¨‹æ¶æ„ï¼š** Flutter ä¸»åº”ç”¨ä¸ Finder æ‰©å±•çš„è§£è€¦è®¾è®¡
- **æ¶ˆæ¯ä¼ é€’ç³»ç»Ÿï¼š** ç»Ÿä¸€çš„ Messager æœºåˆ¶å¤„ç†åº”ç”¨é—´é€šä¿¡
- **æ¨¡å—åŒ–æ¶æ„ï¼š** æ¸…æ™°çš„ç»„ä»¶åˆ†ç¦»å’Œä¾èµ–ç®¡ç†
- **ç±»å‹å®‰å…¨ï¼š** Swift å’Œ Dart çš„å¼ºç±»å‹æ•°æ®æ¨¡å‹
- **é”™è¯¯å¤„ç†ï¼š** å®Œæ•´çš„å¼‚å¸¸æ•è·å’Œç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º

## ç³»ç»Ÿè¦æ±‚

### è¿è¡Œç¯å¢ƒ
- macOS 10.15 (Catalina) æˆ–æ›´é«˜ç‰ˆæœ¬
- æ”¯æŒ Security-Scoped Bookmarks çš„ macOS ç³»ç»Ÿ

### å¼€å‘ç¯å¢ƒ
- Xcode 12.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- Flutter 3.7.2 æˆ–æ›´é«˜ç‰ˆæœ¬
- Swift 5.0 æˆ–æ›´é«˜ç‰ˆæœ¬

### ä¾èµ–é¡¹
- **Flutter ä¾èµ–ï¼š**
  - `cupertino_icons: ^1.0.8` - iOS é£æ ¼å›¾æ ‡
  - `shared_preferences: ^2.5.3` - æœ¬åœ°æ•°æ®å­˜å‚¨
- **ç³»ç»Ÿè¦æ±‚ï¼š**
  - macOS FinderSync æ‰©å±•æ”¯æŒ
  - æ–‡ä»¶ç³»ç»Ÿè®¿é—®æƒé™

## è´¡çŒ®æ–¹å¼

æ¬¢è¿å‚ä¸é¡¹ç›®è´¡çŒ®ï¼æ‚¨å¯ä»¥ï¼š

*   æäº¤ Issue æŠ¥å‘Š Bug æˆ–æå‡ºå»ºè®®
*   æäº¤ Pull Request ä¿®å¤ Bug æˆ–æ·»åŠ æ–°åŠŸèƒ½
*   æ”¹è¿›æ–‡æ¡£å’Œä»£ç æ³¨é‡Š
*   åˆ†äº«ä½¿ç”¨ç»éªŒå’Œæœ€ä½³å®è·µ

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ï¼Œè¯¦æƒ…è¯·è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚
